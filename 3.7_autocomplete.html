<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  æœç´¢æç¤º - Elastic æœç´¢å¼€å‘å®æˆ˜
  
  </title>
 <meta name="description" content="Elastic æœç´¢å¼€å‘å®æˆ˜ï¼Œå›¾ä¹¦">
 <link href="atom.xml" rel="alternate" title="Elastic æœç´¢å¼€å‘å®æˆ˜" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <span style="font-size: 30px;"><a href="index.html">Elastic æœç´¢å¼€å‘å®æˆ˜</a></span> <div style="float: right;"><a class="github-button" href="https://github.com/medcl/book-elastic-search-in-action" data-size="large" data-show-count="true" aria-label="Star medcl/book-elastic-search-in-action on GitHub">Star</a></div>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Elastic æœç´¢å¼€å‘å®æˆ˜</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>

		 

      
        <li class="divider"></li>             
          
              
                <li><a title="æ‘˜è¦" href="0.1_abstract.html">æ‘˜è¦</a></li> 
              
          

      
        <li class="divider"></li>             
          
              
                <li><a title="å‰è¨€" href="1.0_preface.html">å‰è¨€</a></li> 
              
          
              
                <li class="sub_nav"><a title="è°åº”è¯¥è¯»è¿™æœ¬ä¹¦" href="1.1_who_should_read_this_book.html">è°åº”è¯¥è¯»è¿™æœ¬ä¹¦</a></li>
              
          
              
                <li class="sub_nav"><a title="æœ¬ä¹¦ç»“æ„" href="1.2_book_strcture.html">æœ¬ä¹¦ç»“æ„</a></li>
              
          
              
                <li class="sub_nav"><a title="æ€ç»´å¯¼å›¾" href="1.3_mindmap.html">æ€ç»´å¯¼å›¾</a></li>
              
          
              
                <li class="sub_nav"><a title="è½¯ä»¶ç‰ˆæœ¬" href="1.4_soft_version.html">è½¯ä»¶ç‰ˆæœ¬</a></li>
              
          

      
        <li class="divider"></li>             
          
              
                <li><a title="åŸºç¡€å‡†å¤‡" href="2.0_basic_concept.html">åŸºç¡€å‡†å¤‡</a></li> 
              
          
              
                <li class="sub_nav"><a title="å®‰è£…ä½¿ç”¨ Elasticsearch" href="2.1_install_elasticsearch.html">å®‰è£…ä½¿ç”¨ Elasticsearch</a></li>
              
          
              
                <li class="sub_nav"><a title="å¼€å‘è°ƒè¯•å·¥å…·ä»‹ç»" href="2.2_dev_tools.html">å¼€å‘è°ƒè¯•å·¥å…·ä»‹ç»</a></li>
              
          
              
                <li class="sub_nav"><a title="å¸¸ç”¨ API ä»‹ç»" href="2.3_elasticsearch_basic_api.html">å¸¸ç”¨ API ä»‹ç»</a></li>
              
          

      
        <li class="divider"></li>             
          
              
                <li><a title="æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½" href="3.0_site_search.html">æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½</a></li> 
              
          
              
                <li class="sub_nav"><a title="ä»»åŠ¡ä»‹ç»" href="3.1_task_intro.html">ä»»åŠ¡ä»‹ç»</a></li>
              
          
              
                <li class="sub_nav"><a title="é—®é¢˜åˆ—è¡¨" href="3.2_prob_list.html">é—®é¢˜åˆ—è¡¨</a></li>
              
          
              
                <li class="sub_nav"><a title="åŠŸèƒ½åˆ†è§£" href="3.3_task_decomposition.html">åŠŸèƒ½åˆ†è§£</a></li>
              
          
              
                <li class="sub_nav"><a title="æ€»ä½“æ¶æ„" href="3.4_architecture.html">æ€»ä½“æ¶æ„</a></li>
              
          
              
                <li class="sub_nav"><a title="æ•°æ®ç»“æ„" href="3.5_data_structure.html">æ•°æ®ç»“æ„</a></li>
              
          
              
                <li class="sub_nav"><a title="æ•°æ®è¿ç§»" href="3.6_data_migration.html">æ•°æ®è¿ç§»</a></li>
              
          
              
                <li class="sub_nav"><a title="æœç´¢æç¤º" href="3.7_autocomplete.html">æœç´¢æç¤º</a></li>
              
          

      
      </ul>

 <div>
 	<br/>
 	&nbsp;&nbsp; <a class="github-button" href="https://github.com/medcl/book-elastic-search-in-action" data-size="large" data-show-count="true" aria-label="Star medcl/book-elastic-search-in-action on GitHub">Star</a></div>

    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">
					 

                    
                    

                        
                          <li class="side-title"><span><a title="æ‘˜è¦" href="0.1_abstract.html">æ‘˜è¦</a></span></li>
                                      

                        

                    
                    

                        
                          <li class="side-title"><span><a title="å‰è¨€" href="1.0_preface.html">å‰è¨€</a></span></li>
                                      

                        

                        
                          <li><a title="è°åº”è¯¥è¯»è¿™æœ¬ä¹¦" href="1.1_who_should_read_this_book.html">è°åº”è¯¥è¯»è¿™æœ¬ä¹¦</a></li>
                                      

                        

                        
                          <li><a title="æœ¬ä¹¦ç»“æ„" href="1.2_book_strcture.html">æœ¬ä¹¦ç»“æ„</a></li>
                                      

                        

                        
                          <li><a title="æ€ç»´å¯¼å›¾" href="1.3_mindmap.html">æ€ç»´å¯¼å›¾</a></li>
                                      

                        

                        
                          <li><a title="è½¯ä»¶ç‰ˆæœ¬" href="1.4_soft_version.html">è½¯ä»¶ç‰ˆæœ¬</a></li>
                                      

                        

                    
                    

                        
                          <li class="side-title"><span><a title="åŸºç¡€å‡†å¤‡" href="2.0_basic_concept.html">åŸºç¡€å‡†å¤‡</a></span></li>
                                      

                        

                        
                          <li><a title="å®‰è£…ä½¿ç”¨ Elasticsearch" href="2.1_install_elasticsearch.html">å®‰è£…ä½¿ç”¨ Elasticsearch</a></li>
                                      

                        

                        
                          <li><a title="å¼€å‘è°ƒè¯•å·¥å…·ä»‹ç»" href="2.2_dev_tools.html">å¼€å‘è°ƒè¯•å·¥å…·ä»‹ç»</a></li>
                                      

                        

                        
                          <li><a title="å¸¸ç”¨ API ä»‹ç»" href="2.3_elasticsearch_basic_api.html">å¸¸ç”¨ API ä»‹ç»</a></li>
                                      

                        

                    
                    

                        
                          <li class="side-title"><span><a title="æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½" href="3.0_site_search.html">æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½</a></span></li>
                                      

                        

                        
                          <li><a title="ä»»åŠ¡ä»‹ç»" href="3.1_task_intro.html">ä»»åŠ¡ä»‹ç»</a></li>
                                      

                        

                        
                          <li><a title="é—®é¢˜åˆ—è¡¨" href="3.2_prob_list.html">é—®é¢˜åˆ—è¡¨</a></li>
                                      

                        

                        
                          <li><a title="åŠŸèƒ½åˆ†è§£" href="3.3_task_decomposition.html">åŠŸèƒ½åˆ†è§£</a></li>
                                      

                        

                        
                          <li><a title="æ€»ä½“æ¶æ„" href="3.4_architecture.html">æ€»ä½“æ¶æ„</a></li>
                                      

                        

                        
                          <li><a title="æ•°æ®ç»“æ„" href="3.5_data_structure.html">æ•°æ®ç»“æ„</a></li>
                                      

                        

                        
                          <li><a title="æ•°æ®è¿ç§»" href="3.6_data_migration.html">æ•°æ®è¿ç§»</a></li>
                                      

                        

                        
                          <li><a title="æœç´¢æç¤º" href="3.7_autocomplete.html">æœç´¢æç¤º</a></li>
                                      

                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <!-- start toc -->
<div style="background: #fbf7f7; margin-top: 35px;padding: 10px;">
  <link rel="stylesheet" href="asset/css/zTreeStyle/zTreeStyle.css" type="text/css">
        <ul id="tree" class="ztree"></ul>
</div>   
<!-- end toc -->

<div class="markdown-body">
<h1>æœç´¢æç¤º</h1>

<p>æœç´¢æç¤ºã€æ™ºèƒ½æç¤ºã€è‡ªåŠ¨å®Œæˆã€è‡ªåŠ¨è¡¥å…¨ï¼Œéƒ½æ˜¯è¯´çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯å½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥æƒ³è¦æŸ¥è¯¢çš„å†…å®¹çš„æ—¶å€™ï¼Œåœ¨å…³é”®å­—è¿˜æ²¡æœ‰å®Œå…¨è¾“å…¥å®Œæˆä¹‹å‰ï¼Œèƒ½å¤Ÿæ ¹æ®æ¯æ¬¡è¾“å…¥çš„éƒ¨åˆ†å­—è¯è¿›è¡Œæç¤ºï¼Œåœ¨ç”¨æˆ·ä¸€è¾¹è¾“å…¥çš„æ—¶å€™ï¼Œç»™ç”¨æˆ·ä»¥æç¤ºç”šè‡³æå–è®©ç”¨æˆ·æ‰¾åˆ°æœ€ç»ˆæƒ³è¦çš„ç»“æœï¼Œä»è€Œæå‡ç”¨æˆ·çš„æœç´¢ä½“éªŒï¼Œè¿™ä¸ªåŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯åšæœç´¢çš„ä¸€ä¸ªåŸºæœ¬éœ€æ±‚ã€‚</p>

<p>æˆ‘ä»¬æœ¬èŠ‚ä¸»è¦æ¥æ¢è®¨ä¸€ä¸‹å¦‚ä½•å®ç°è¿™ç§æœç´¢æç¤ºçš„åŠŸèƒ½ã€‚</p>

<p>ä¸€èˆ¬æœç´¢æç¤ºå·¥ä½œçš„åŸç†æ˜¯ï¼Œå½“ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†é‡Œé¢è¾“å…¥çš„æ—¶å€™ï¼Œä¼šè§¦å‘ä¸€ä¸ªè¾“å…¥äº‹ä»¶ï¼ŒJS åœ¨æµè§ˆå™¨æ•æ‰åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œæ„é€ ä¸€ä¸ª AJAX å¼‚æ­¥ HTTP æŸ¥è¯¢è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥å—åˆ°è¿™ä¸ªåŒ…å«äº†ç”¨æˆ·è¾“å…¥å…³é”®å­—çš„è¯·æ±‚ï¼Œé€šè¿‡è¿™ä¸ªå…³é”®å­—åœ¨æœåŠ¡ç«¯è¿›è¡ŒæŸ¥è¯¢ï¼Œå°½å¯èƒ½æ‰¾åˆ°ç›¸å…³çš„æ•°æ®ï¼Œå‘é€åˆ°æµè§ˆå™¨ç«¯ï¼Œæµè§ˆå™¨ç«¯è·å–æœåŠ¡å™¨çš„å“åº”æ•°æ®ï¼Œåœ¨æµè§ˆå™¨ç«¯åŠ¨æ€æ¸²æŸ“å‡ºä¸€ä¸ªæœç´¢ç»“æœåˆ—è¡¨ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p>

<p>é™¤äº†ä¸Šé¢çš„è¿™äº›ï¼Œè¿˜éœ€è¦å¤„ç†è¯¸å¦‚è¯·æ±‚çš„å¤„ç†ä¸å›è°ƒï¼Œç¡®ä¿è¯·æ±‚å“åº”å›è°ƒçš„å…ˆåé¡ºåºï¼Œæ§åˆ¶è¯·æ±‚çš„é¢‘ç‡ï¼Œæœ¬åœ°çš„ç¼“å­˜çš„å¤„ç†ï¼Œå¦å¤–æœç´¢ç»“æœçš„å±•ç°ä¹Ÿè¦åšåˆ°è‡ªç”±å¸ƒå±€å’Œæ ·å¼è‡ªå®šä¹‰ã€‚å¯ä»¥è¯´è¦åšå¥½ä¸€ä¸ªæœç´¢æç¤ºå…¶å®ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚</p>

<h2 id="toc_0">UI è®¾è®¡</h2>

<p>è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯æœç´¢æç¤ºçš„ç•Œé¢è®¾è®¡ï¼Œä¹Ÿå¾ˆé‡è¦ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç›®å‰ä¸»æµç½‘ç«™çš„å‡ ç§å¸¸è§çš„æœç´¢æç¤ºçš„å®ç°ï¼Œå‚è€ƒä¸€ä¸‹ã€‚</p>

<ul>
<li> ç™¾åº¦ (Baidu.com)
<img src="media/15308021492726/15309728545697.jpg" alt=""/></li>
</ul>

<p>å›½å†…æœ€å¤§çš„æœç´¢å¼•æ“ï¼Œç™¾åº¦çš„æœç´¢æç¤ºï¼Œæˆ‘ä»¬è¾“å…¥ Elasticsearchï¼Œå¯ä»¥çœ‹åˆ°æœ‰4ä¸ªç›¸å…³çš„è¯æ¡ä½œä¸ºæç¤ºï¼Œéå¸¸æœ´ç´ ç®€å•ã€‚ä½œä¸ºä¸€ä¸ªæœç´¢å¼•æ“ï¼Œæ¨èçš„æœç´¢è¯åªæ˜¯æ–¹ä¾¿ä½ ç”¨æ¥è¿›è¡Œè¿›ä¸€æ­¥çš„æœç´¢ã€‚</p>

<ul>
<li>äº¬ä¸œï¼ˆjd.comï¼‰
<img src="media/15308021492726/15309730285264.jpg" alt=""/></li>
</ul>

<p>çŸ¥åç”µå•†ç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æœç´¢ elastics å¯ä»¥å‡ºç°å¾ˆå¤šå¯èƒ½çš„å•†å“åç§°ä»¥åŠå¤šäº†ä¸€ä¸ªå¯¹åº”çš„å•†å“æ•°ï¼Œè¿™æ ·åœ¨ç‚¹å‡»æœç´¢å¯¹åº”çš„æ¨èä¹‹å‰å°±çŸ¥é“é‚£ä¸ªå…³é”®å­—çš„å•†å“æ•°å„æ˜¯å¤šå°‘ã€‚</p>

<ul>
<li>Elasticï¼ˆelastic.coï¼‰
<img src="media/15308021492726/15309733636757.jpg" alt=""/></li>
</ul>

<p>Elastic å®˜æ–¹ç½‘ç«™ï¼ŒåŒæ ·æœç´¢ Elastic ä½œä¸ºå…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¨èç»“æœå¯¹å…³é”®å­—è¿›è¡Œäº†å­—ä½“åŠ ç²—ï¼Œå¹¶ä¸”æ¨èç»“æœé™¤äº†æ˜¾ç¤ºäº†æ¨èç½‘é¡µçš„æ ‡é¢˜ï¼Œè¿˜æ˜¾ç¤ºäº†è¯¥ç½‘é¡µçš„å¯¼èˆªè·¯å¾„ï¼Œè¿™æ ·å¯¹ç½‘é¡µçš„å¤§ä½“åˆ†ç±»å¯ä»¥æœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ã€‚</p>

<h2 id="toc_1">Typeahead çš„ä½¿ç”¨</h2>

<p>ä¸ºäº†æé«˜æ•ˆç‡ï¼Œä¸é‡å¤é€ è½®å­ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæˆç†Ÿå¥½ç”¨çš„æœç´¢æç¤ºæ¡†æ¶ï¼Œç”± Twitter å‡ºå“çš„ Typeahead.jsã€‚</p>

<ul>
<li>é¡¹ç›®åœ°å€ï¼š<a href="https://typeahead.js.org/">https://typeahead.js.org/</a></li>
<li>æºç åœ°å€ï¼š<a href="https://github.com/twitter/typeahead.js">https://github.com/twitter/typeahead.js</a></li>
</ul>

<p>ä¸»è¦åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼ŒBloodhound æç¤ºå¼•æ“å’Œ UI View æ¸²æŸ“å¼•æ“ï¼Œæç¤ºå¼•æ“ä¸»è¦ç”¨æ¥æ ¹æ®ç»™å®šæŸ¥è¯¢æ¥è®¡ç®—æ¨èç»“æœï¼ŒUI View ä¸»è¦ç”¨æ¥æ¸²æŸ“æ¨èç»“æœå’Œå¤„ç† DOM äº¤äº’ï¼Œä¸¤ä¸ªç»„ä»¶å¯ä»¥åˆ†å¼€ä½¿ç”¨ï¼Œæ­é…èµ·æ¥å°±èƒ½å®ç°å¼ºå¤§çš„æœç´¢æç¤ºåŠŸèƒ½ï¼š</p>

<ul>
<li>é¢å‘æœ€ç»ˆç”¨æˆ·çš„å³æœå³å¾—æœç´¢æç¤º</li>
<li>ç”¨æˆ·è¾“å…¥æ—¶å°†ç¬¬ä¸€ä¸ªç»“æœä½œä¸ºè¾“å…¥æç¤º</li>
<li>æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿æ¥è‡ªå®šä¹‰ UI ç•Œé¢</li>
<li>RTL è¯­è¨€çš„æ”¯æŒ and input method editors.</li>
<li>Highlights query matches within the suggestion.</li>
<li>Triggers custom events to encourage extensibility.</li>
</ul>

<p><img src="media/15308021492726/15310140979019.jpg" alt=""/></p>

<h2 id="toc_2">Typeahead åŸºæœ¬ä½¿ç”¨</h2>

<p>å…·ä½“å¦‚ä½•ä½¿ç”¨ Typeahead å‘¢ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹å§ã€‚</p>

<p>æ‰“å¼€é¡¹ç›®ä¸»é¡µï¼ˆ <a href="https://github.com/twitter/typeahead.js">https://github.com/twitter/typeahead.js</a> ï¼‰å¯ä»¥çœ‹åˆ°æœ‰å¤šä¸ªä¸‹è½½é€‰æ‹©ï¼Œæˆ‘ä»¬é€‰æ‹© <a href="http://twitter.github.com/typeahead.js/releases/latest/typeahead.bundle.min.js">typeahead.bundle.min.js</a> ï¼Œè¿™ä¸ªæ˜¯åŒ…å«bloodhound.js å’Œ typeahead.jquery.js ä¸”å‹ç¼©è¿‡çš„åŒ…ï¼Œåªæœ‰ 39KB å¤§å°ã€‚</p>

<p>Typeahead éœ€è¦ä¾èµ– jQuery 1.9+ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„é™æ€é¡µé¢ï¼Œåä¸º index.htmlï¼Œä¸‹è½½å¥½ jQuery å’Œ Typeahead çš„ JSï¼Œç›®å½•å¦‚ä¸‹ï¼š<br/>
<img src="media/15308021492726/15310194861664.jpg" alt=""/></p>

<p>æ‰“å¼€ index.htmlï¼Œç¼–è¾‘å†…å®¹ä¸ºï¼š</p>

<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
 
 &lt;div id=&quot;demo&quot;&gt;
  &lt;input class=&quot;typeahead&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å…³é”®å­—&quot;&gt;
 &lt;/div&gt;

&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;typeahead.bundle.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
//TODO  
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>ä¸Šé¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ HTML é¡µé¢éª¨æ¶ï¼Œæˆ‘ä»¬åˆ†åˆ«å¼•å…¥äº† jQuery å’Œ Typeahead çš„ JS æ–‡ä»¶ï¼ŒåŒæ—¶æ·»åŠ äº†ä¸€ä¸ªåä¸º <code>demo</code> çš„ div å¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª input å¯¹è±¡ä½œä¸ºè¾“å…¥æ¡†ã€‚</p>

<p>æˆ‘ä»¬ç»§ç»­ç¼–è¾‘ï¼Œæ›¿æ¢ä¸Šé¢çš„ //TODO ä¸ºå…·ä½“çš„ Typeahead è°ƒç”¨è„šæœ¬ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªé™æ€çš„æ•°æ®æºï¼Œå¹¶ä¸”é€šè¿‡æ­£åˆ™åŒ¹é…æ¥åˆ¤æ–­æ˜¯å¦åŒ¹é…æŸ¥è¯¢ï¼Œä»£ç å†…è”æ³¨é‡Šå¦‚ä¸‹ï¼š</p>

<pre><code>//å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ­£åˆ™æ¥åŒ¹é…å­—ç¬¦ä¸²çš„å‡½æ•°å¯¹è±¡ï¼Œå‚æ•°æ˜¯æ‰€æœ‰å€™é€‰ç»“æœï¼Œè¿”å›åŒ…å«å…³é”®å­—çš„ç»“æœé›†
var substringMatcher = function(strs) {
    
  //å…·ä½“çš„åŒ¹é…å‡½æ•°å®šä¹‰
  return function findMatches(q, cb) {
    var matches, substringRegex;

    //æ‰€æœ‰åŒ¹é…çš„ç»“æœéƒ½ä¼šæ”¾åœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢è¿›è¡Œè¿”å›
    matches = [];

    //æ–°å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯åŒ…å«å…³é”®å­— `q`ï¼Œç¬¬äºŒä¸ªå‚æ•° `i` è¡¨ç¤ºå¿½ç•¥å¤§å°å†™
    substrRegex = new RegExp(q, &#39;i&#39;);

    //å¯¹ä¼ è¿›æ¥çš„ `strs` æ•°ç»„è¿›è¡Œè¿­ä»£ï¼Œä¾æ¬¡ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œè¡¨ç¤ºåŒ…å«æŸ¥è¯¢å…³é”®å­— `q`ï¼Œé‚£ä¹ˆå°±æ·»åŠ åˆ° `matches` ç»“æœæ•°ç»„
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push(str);
      }
    });

    //å°†åŒ¹é…ç»“æœè¾“å‡ºç»™å›è°ƒå‡½æ•°
    cb(matches);
  };
};

//ä¸‹é¢å¼€å§‹æ­£å¼è°ƒç”¨

//æ‰€æœ‰æœç´¢ç»“æœçš„å€™é€‰è¯ï¼Œé™æ€æ•°æ®
var suggestions = [&#39;Elastic&#39;, &#39;Elasticsearch&#39;, &#39;Kibana&#39;, &#39;Logstash&#39;, &#39;Beats&#39;, &#39;Elasticç¤¾åŒº&#39;];

//ç»‘å®š #demo å¯¹è±¡ï¼Œèµ‹äºˆ typeahead çš„æœç´¢æç¤ºè¡Œä¸º
$(&#39;#demo .typeahead&#39;).typeahead({
  hint: true,
  highlight: true,
  minLength: 1
},
{
  name: &#39;suggestions&#39;,
  source: substringMatcher(suggestions)
});
</code></pre>

<p>ä¿å­˜ä¹‹åï¼Œæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨ç½‘é¡µçš„è¾“å…¥æ¡†é‡Œé¢è¾“å…¥å…³é”®å­— <code>a</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æœç´¢æç¤ºçš„æ•ˆæœäº†ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="media/15308021492726/15310215219777.jpg" alt=""/></p>

<p>çœ‹ä¸Šå»ä¸é”™ï¼Œ å’Œæˆ‘ä»¬æœŸæœ›çš„ä¸€æ ·ï¼Œä¸æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„å®ç°çš„æœç´¢æç¤ºåŠŸèƒ½ä¹ˆã€‚</p>

<p>ä¸è¿‡ï¼Œä¸Šé¢çš„æ•°æ®æºæ˜¯æˆ‘ä»¬ç¡¬ç¼–ç çš„é™æ€æ•°æ®ï¼Œæˆ‘ä»¬çš„æœç´¢ç»“æœåº”è¯¥æ˜¯è¿œç¨‹ä» Elasticsearch é‡Œé¢åŠ¨æ€æ£€ç´¢å‡ºæ¥çš„æ‰å¯¹å‘€ã€‚</p>

<h2 id="toc_3">Typeahead ä»‹ç»</h2>

<p>Typeahead æ˜¯å¦‚ä½•è·å–æ•°æ®æºçš„å‘¢ï¼Œè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆä»ç¬¬ä¸€ä¸ªç»„ä»¶ Typeahead çš„ API å’Œæ¦‚å¿µè¯´èµ·ã€‚</p>

<p>Typeahead æä¾›äº†ä»¥ä¸‹ 4 ç»„ APIï¼š</p>

<ul>
<li>jQuery#typeahead(options, [*datasets])</li>
<li>jQuery#typeahead(&#39;val&#39;, val)</li>
<li>jQuery#typeahead(&#39;destroy&#39;)</li>
<li>jQuery.fn.typeahead.noConflict()</li>
</ul>

<h3 id="toc_4">jQuery#typeahead(options, [*datasets])</h3>

<p>å¯¹ä¸€ä¸ªç»™å®šçš„æ–‡æœ¬è¾“å…¥æ¡†å¯¹è±¡èµ‹äºˆ typeahead çš„æœç´¢æç¤ºèƒ½åŠ›ã€‚ä¹Ÿå°±æ˜¯åˆå§‹åŒ– Typeahead çš„åŠ¨ä½œã€‚</p>

<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>

<pre><code>$(&#39;.typeahead&#39;).typeahead({
  minLength: 3,
  highlight: true
},
{
  name: &#39;my-dataset&#39;,
  source: mySource
});
</code></pre>

<blockquote>
<p><code>$(&#39;.typeahead&#39;)</code> æ˜¯ jQuery çš„é€‰æ‹©å™¨ï¼ŒæŒ‰ç…§ CSS åç§°æ¥è¿›è¡Œ dom èŠ‚ç‚¹ç­›é€‰ï¼Œæ­¤å¤„ CSS åç§°ä¸ºï¼štypeahead</p>
</blockquote>

<h4 id="toc_5">options å‚æ•°ç”¨æ¥é…ç½®ç›¸å…³å‚æ•°</h4>

<p>æ”¯æŒçš„å®Œæ•´å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>highlight</td>
<td>false</td>
<td>å½“è®¾ç½®ä¸º true çš„æ—¶å€™ï¼Œæœç´¢ç»“æœæ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šå°†å…³é”®å­—åŒ…è£…ä¸Š strong æ ‡ç­¾ï¼Œå¹¶è®¾ç½®è¯¥æ ‡ç­¾çš„ css æ ·å¼åä¸º <code>{{classNames.highlight}}</code>Â </td>
</tr>
<tr>
<td>hint</td>
<td>true</td>
<td>å½“è®¾ç½®ä¸º false çš„æ—¶å€™ï¼Œè¾“å…¥æ¡†ä¸ä¼šæ˜¾ç¤ºè¾“å…¥æç¤º</td>
</tr>
<tr>
<td>autoselect</td>
<td>false</td>
<td>å½“è®¾ç½®ä¸º true çš„æ—¶å€™ï¼ŒæŒ‰å›è½¦é”®ä¼šé»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæœç´¢æç¤ºç»“æœç”¨äºæœç´¢è¡¨å•çš„æäº¤</td>
</tr>
<tr>
<td>minLength</td>
<td>1</td>
<td>ç”¨äºæœç´¢æç¤ºçš„æœ€å°çš„å­—ç¬¦è¾“å…¥é•¿åº¦</td>
</tr>
<tr>
<td>classNames</td>
<td>æ— </td>
<td>ç”¨äºè¦†ç›–é»˜è®¤çš„ CSS æ ·å¼è¡¨</td>
</tr>
</tbody>
</table>

<p>CSS æ ·å¼è¡¨ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>

<pre><code>$(&#39;.typeahead&#39;).typeahead({
  classNames: {
    input: &#39;Typeahead-input&#39;,
    hint: &#39;Typeahead-hint&#39;,
    selectable: &#39;Typeahead-selectable&#39;
  }
});
</code></pre>

<p>å®Œæ•´çš„ CSS çš„æ ·å¼å®šä¹‰ï¼š</p>

<table>
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>input</td>
<td>tt-input</td>
<td>åº”ç”¨åˆ° Typeahead ç»‘å®šçš„ input å¯¹è±¡</td>
</tr>
<tr>
<td>hint</td>
<td>tt-hint</td>
<td>åº”ç”¨åˆ°å‡ºç°è¾“å…¥æç¤ºçš„ input å¯¹è±¡</td>
</tr>
<tr>
<td>menu</td>
<td>tt-menu</td>
<td>åº”ç”¨åˆ°æ˜¾ç¤ºæœç´¢æç¤ºç»“æœçš„èœå•</td>
</tr>
<tr>
<td>dataset</td>
<td>tt-dataset</td>
<td>åº”ç”¨åˆ°æ‰€æœ‰çš„æ•°æ®é›†å¯¹è±¡å…ƒç´ </td>
</tr>
<tr>
<td>suggestion</td>
<td>tt-suggestion</td>
<td>åº”ç”¨åˆ°æ‰€æœ‰çš„æœç´¢æç¤ºå¯¹è±¡ï¼Œæ¯ä¸€æ¡æœç´¢æç¤ºè®°å½•</td>
</tr>
<tr>
<td>empty</td>
<td>tt-empty</td>
<td>åº”ç”¨åˆ°æœç´¢æç¤ºç»“æœä¸ºç©ºçš„æç¤ºèœå•</td>
</tr>
<tr>
<td>open</td>
<td>tt-open</td>
<td>åº”ç”¨åˆ°æ‰“å¼€çŠ¶æ€ä¸‹çš„æç¤ºèœå•</td>
</tr>
<tr>
<td>cursor</td>
<td>tt-cursor</td>
<td>åº”ç”¨åˆ°å…‰æ ‡ç§»åŠ¨åˆ°æœç´¢ç»“æœä¸Šçš„æ ·å¼</td>
</tr>
<tr>
<td>highlight</td>
<td>tt-highlight</td>
<td>åº”ç”¨åˆ°åŒ…è£¹å…³é”®å­—çš„é«˜äº®å¯¹è±¡</td>
</tr>
</tbody>
</table>

<p>ä¸¾ä¸ª CSS çš„å®šä¹‰ä¾‹å­ï¼š</p>

<pre><code>&lt;style type=&quot;text/css&quot;&gt;
    
    .tt-hint{
        color: yellow;
    }

    .tt-menu{
        border: 1px solid blue;
    }

    .tt-dataset{
        color: white;
    }

    .tt-suggestion{
        background: #cccccc;
    }

    .tt-cursor{
        background: gray;
    }

    .tt-highlight{
        color: red;
    }

 &lt;/style&gt;
</code></pre>

<p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š<br/>
<img src="media/15308021492726/15312775612822.jpg" alt=""/><br/>
è™½ç„¶å¾ˆä¸‘ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡å¯¹ä¸Šé¢è¿™äº› CSS çš„è‡ªå®šä¹‰ï¼Œæˆ‘ä»¬å°±èƒ½å®Œå…¨æ§åˆ¶æœç´¢ç»“æœçš„å±•ç¤ºï¼Œå¯ä»¥è¯´æ˜¯éå¸¸çµæ´»å¼ºå¤§ã€‚</p>

<h4 id="toc_6">datasets å‚æ•°ç”¨æ¥å®šä¹‰æœç´¢æç¤ºçš„æ•°æ®é›†æ¥æº</h4>

<p>Typeahead å¯ä»¥ç»„åˆä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®é›†ï¼Œå½“ç”¨æˆ·çš„è¾“å…¥å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªæ•°æ®é›†éƒ½ä¼šå°è¯•æ¸²æŸ“å‡ºæ–°çš„æœç´¢æç¤ºç»“æœã€‚</p>

<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸€ä¸ªæ•°æ®é›†å°±å¤Ÿäº†ï¼Œåªæœ‰å½“ä½ çš„ç»“æœéœ€è¦æ ¹æ®ç›®å½•å…³ç³»è¿›è¡Œåˆ†ç»„æˆ–æ’åºæ‰éœ€è¦ç”¨åˆ°å¤šä¸ªæ•°æ®é›†ã€‚</p>

<p>datasets æ”¯æŒä»¥ä¸‹å‚æ•°æ¥è¿›è¡Œè®¾ç½®ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>source</td>
<td>æ— </td>
<td>å¿…å¡«é¡¹ï¼Œè¡¨ç¤ºæœç´¢æç¤ºçš„èƒŒåæ•°æ®æºï¼ŒæœŸå¾…è®¾ç½®çš„æ˜¯ä¸€ä¸ªå¸¦æœ‰Â <code>(query, syncResults, asyncResults)</code> ç­¾åçš„å‡½æ•°ï¼ŒsyncResults ç”¨äºåŒæ­¥æ“ä½œä¸‹çš„ç»“æœè°ƒç”¨ï¼ŒasyncResults ç”¨äºå¼‚æ­¥æ“ä½œä¸‹çš„ç»“æœè°ƒç”¨ï¼Œå¦‚ AJAX è¯·æ±‚ï¼Œsource è¿˜èƒ½æ˜¯ Bloodhound çš„ä¸€ä¸ªå®ä¾‹ã€‚</td>
</tr>
<tr>
<td>async</td>
<td>æ— </td>
<td>æ ‡è¯†æ•°æ®é›†æ˜¯å¦å¼‚æ­¥ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™å–å†³äº source å‚æ•°çš„å‡½æ•°å®šä¹‰ï¼Œå¦‚æœsource å¯¹åº”çš„å‡½æ•°è®¾ç½®äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™è¡¨ç¤ºä¸ºå¼‚æ­¥ã€‚</td>
</tr>
<tr>
<td>name</td>
<td>éšæœºæ•°</td>
<td>è¯¥æ•°æ®é›†çš„åç§°ï¼Œè¯¥åç§°ä¼šé™„åŠ åˆ° <code>{{classNames.dataset}}-</code> ä½œä¸ºä¸€ä¸ª CSS æ ·å¼åç§°ï¼Œç”¨äºè‡ªå®šä¹‰è¯¥æ•°æ®é›†çš„ CSS æ ·å¼ã€‚</td>
</tr>
<tr>
<td>limit</td>
<td>5</td>
<td>æœ€å¤šæ˜¾ç¤ºå¤šå°‘æ¡æœç´¢æç¤ºã€‚</td>
</tr>
<tr>
<td>display</td>
<td>æ–‡æœ¬åŒ–</td>
<td>å¯¹äºä¸€ä¸ªç»™å®šçš„æœç´¢ç»“æœå¯¹è±¡ï¼Œåˆ¤æ–­å¦‚ä½•æ˜¾ç¤ºå…¶å†…å®¹çš„æ–‡æœ¬ï¼Œç”¨äºå½“é€‰ä¸­æŸæ¡æœç´¢æç¤ºç»“æœä¹‹åï¼Œå¦‚ä½•è®¾ç½® input è¾“å…¥æ¡†é‡Œé¢çš„æ–‡æœ¬å€¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦å­—æ®µæˆ–è€…è½¬æ¢å‡½æ•°ï¼Œé»˜è®¤æ˜¯æ–‡æœ¬åŒ–å‡½æ•°ã€‚</td>
</tr>
<tr>
<td>templates</td>
<td>æ— </td>
<td>ç”¨äºæ¸²æŸ“æ•°æ®é›†ç»“æœçš„æ¨¡æ¿ï¼Œæ¨¡æ¿æ˜¯ä¸€ä¸ªå°† JavaScript å¯¹è±¡è½¬æ¢ä¸º HTML çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º JS æ•°æ®å¯¹è±¡ï¼Œè¿”å› HTML è¾“å‡ºã€‚</td>
</tr>
</tbody>
</table>

<p>å…³äº source å‚æ•°çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ï¼š</p>

<pre><code>  source: substringMatcher(suggestions),
</code></pre>

<p>source æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå­—ç¬¦åŒ¹é…å‡½æ•°ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥å¯¹ä¸€ä¸ªå­—ç¬¦æ•°ç»„éå†ï¼Œç­›é€‰åŒ¹é…å…³é”®å­—çš„ç»“æœé›†ã€‚</p>

<pre><code>var substringMatcher = function(strs) { 
  return function findMatches(q, cb) {
    ...
    //match process
    ...
    cb(matches);
  };
};
</code></pre>

<p>ä¸Šé¢çš„ <code>cb</code> å°±æ˜¯å¯¹åº”çš„ source çš„ç¬¬äºŒä¸ªå‚æ•° <code>syncResults</code>ï¼Œå³ç”¨äºåŒæ­¥ç»“æœçš„å›è°ƒã€‚æ˜¯ä¸æ˜¯æ¸…æ¥šå¤šäº†ã€‚</p>

<p>æˆ‘ä»¬å†çœ‹çœ‹å…³äº templates çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹é€‰é¡¹ï¼š</p>

<table>
<thead>
<tr>
<th>æ¨¡æ¿å</th>
<th>ä½¿ç”¨æ¡ä»¶</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>notFound</td>
<td>å½“æŸä¸ªæŸ¥è¯¢è¿”å› 0 ä¸ªæœç´¢ç»“æœ</td>
<td>å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªÂ HTML å­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ¨¡æ¿å‡½æ•°å‚æ•°åŒ…å« <code>query</code> è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶ã€‚</td>
</tr>
<tr>
<td>pending</td>
<td>å½“ 0 ä¸ªåŒæ­¥ç»“æœè¿”å›ï¼Œä½†æ˜¯æœ‰å¼‚æ­¥è¯·æ±‚è¿˜åœ¨åå°è¿è¡Œæ—¶</td>
<td>å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ª HTML å­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ¨¡æ¿å‡½æ•°å‚æ•°åŒ…å« <code>query</code> è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶ã€‚</td>
</tr>
<tr>
<td>header</td>
<td>å½“æœç´¢ç»“æœå±•ç°æ—¶</td>
<td>æ˜¾ç¤ºåœ¨æœç´¢ç»“æœé¡¶éƒ¨çš„å†…å®¹ï¼Œå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªÂ HTML å­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ¨¡æ¿å‡½æ•°å‚æ•°åŒ…å« <code>query</code> è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶å’Œ <code>suggestions</code> è¡¨ç¤ºæœç´¢ç»“æœã€‚</td>
</tr>
<tr>
<td>footer</td>
<td>å½“æœç´¢ç»“æœå±•ç°æ—¶</td>
<td>æ˜¾ç¤ºåœ¨æœç´¢ç»“æœåº•éƒ¨çš„å†…å®¹ï¼Œå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªÂ HTML å­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ¨¡æ¿å‡½æ•°å‚æ•°åŒ…å« <code>query</code> è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶å’Œ <code>suggestions</code> è¡¨ç¤ºæœç´¢ç»“æœã€‚</td>
</tr>
<tr>
<td>suggestion</td>
<td>æ¸²æŸ“å•æ¡æœç´¢ç»“æœæ—¶</td>
<td>å¦‚æœè®¾ç½®ï¼Œåªèƒ½æ˜¯æ¨¡æ¿å‡½æ•°ï¼Œç›¸å…³çš„æœç´¢æç¤ºå¯¹è±¡ä¼šä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼Œé»˜è®¤ä¼šå°† <code>display</code> çš„å€¼åŒ…å«åœ¨ä¸€ä¸ª div æ ‡ç­¾å†…ï¼Œå³ <code>&lt;div&gt;{{value}}&lt;/div&gt;</code>ã€‚</td>
</tr>
</tbody>
</table>

<p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸ª notFound æ¨¡æ¿å¦‚ä¸‹:</p>

<pre><code>$(&#39;#demo .typeahead&#39;).typeahead({
  hint: true,
  highlight: true
},
{
  name: &#39;suggestions&#39;,
  source: substringMatcher(suggestions),
  &quot;templates&quot;:{
    &quot;notFound&quot;:function(context){ return &quot;&lt;span class=tt-empty&gt;Nothing Found!&lt;/span&gt;&quot; }
  }
});
</code></pre>

<p>å½“è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨ç»“æœçš„æŸ¥è¯¢æ¡ä»¶ï¼Œå³å¯è·å¾—å¦‚ä¸‹æ•ˆæœ:<br/>
<img src="media/15308021492726/15312789307826.jpg" alt=""/></p>

<p>ç„¶åæˆ‘ä»¬å†è¯•ç€è‡ªå®šä¹‰ä¸€ä¸‹æœç´¢ç»“æœçš„å±•ç¤ºï¼ŒåŠ ä¸Šå¤´éƒ¨å’Œåº•éƒ¨çš„ä¿¡æ¯ï¼š</p>

<pre><code>&quot;templates&quot;:{
    &quot;notFound&quot;:function(context){ return &quot;&lt;span class=tt-empty&gt;Nothing Found for query: &quot;+context.query+&quot;!&lt;/span&gt;&quot; },
    &quot;header&quot;:&quot;&lt;span style=font-size:12px;&gt;My suggestion:&lt;/span&gt;&quot;,
    &quot;footer&quot;:&quot;&lt;span style=font-size:10px;&gt;Copyright 2018 &amp;copy;&lt;/span&gt;&quot;,
    &quot;suggestion&quot;:function(context){ return &quot;&lt;div&gt;&quot;+context+&quot;!&lt;/div&gt;&quot; },
    }
</code></pre>

<p>æ•ˆæœå¦‚ä¸‹ï¼š<br/>
<img src="media/15308021492726/15312802129445.jpg" alt=""/></p>

<p>é€šè¿‡ç”¨æ¨¡æ¿æ¥æ§åˆ¶æœç´¢æç¤ºç»“æœçš„å±•ç¤ºã€‚å†ç»“åˆè‡ªå®šä¹‰çš„ CSS æ ·å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä»»ä½•æƒ³è¦çš„æœç´¢ç»“æœå±•ç¤ºäº†ã€‚</p>

<h3 id="toc_7">jQuery#typeahead(&#39;val&#39;, val)</h3>

<p>åŠ¨æ€è®¾ç½®è¾“å…¥æ¡†çš„è¾“å…¥æ–‡æœ¬å€¼ã€‚</p>

<pre><code>var myVal= &quot;your keyword&quot;;
$(&#39;.typeahead&#39;).typeahead(&#39;val&#39;, myVal);
</code></pre>

<h3 id="toc_8">jQuery#typeahead(&#39;open&#39;)</h3>

<p>æ‰‹åŠ¨æ‰“å¼€æœç´¢æç¤ºç»“æœèœå•ã€‚</p>

<pre><code>$(&#39;.typeahead&#39;).typeahead(&#39;open&#39;);
</code></pre>

<h3 id="toc_9">jQuery#typeahead(&#39;close&#39;)</h3>

<p>æ‰‹åŠ¨å…³é—­æœç´¢æç¤ºç»“æœèœå•ã€‚</p>

<pre><code>$(&#39;.typeahead&#39;).typeahead(&#39;close&#39;);
</code></pre>

<h3 id="toc_10">jQuery#typeahead(&#39;destroy&#39;)</h3>

<p>ç§»é™¤ typeahead åŠŸèƒ½ï¼Œæ¢å¤é»˜è®¤çš„ input çŠ¶æ€ã€‚</p>

<pre><code>$(&#39;.typeahead&#39;).typeahead(&#39;destroy&#39;);
</code></pre>

<h3 id="toc_11">jQuery.fn.typeahead.noConflict()</h3>

<p>è¿”å›ä¸€ä¸ª Typeahead æ’ä»¶å¼•ç”¨ï¼Œå¹¶æ¢å¤ jQuery.fn.typeahead åˆ°ä¸Šä¸€ä¸ªå€¼ã€‚ç”¨äºé‡æ–°å®šä¹‰ Typeahead çš„æ–¹æ³•åï¼Œç”¨æ¥é¿å…å‘½åå†²çªã€‚</p>

<pre><code>var typeahead = jQuery.fn.typeahead.noConflict();
jQuery.fn._typeahead = typeahead;
</code></pre>

<p>æ‰§è¡Œä¸Šé¢çš„ä»£ç åï¼Œå°±å¯ä»¥åœ¨ä»£ç é‡Œé¢ä½¿ç”¨ <code>_typeahead</code> æ¥ä»£æ›¿ <code>typeahead</code> æ¥è¿›è¡Œè°ƒç”¨äº†ã€‚</p>

<h2 id="toc_12">Bloodhound ä»‹ç»</h2>

<p>æ¥ä¸‹æ¥å†çœ‹ä¸€ä¸‹ Typeahead çš„å¦å¤–ä¸€ä¸ªç»„ä»¶ Bloodhound çš„ä½¿ç”¨ã€‚<br/>
Bloodhound æ˜¯ typeahead.js çš„æç¤ºå¼•æ“ï¼Œæä¾›äº†å¾ˆå¤šé«˜çº§çš„ç‰¹æ€§æ¯”å¦‚ï¼š</p>

<ul>
<li>æ”¯æŒç¡¬ç¼–ç çš„é™æ€æ•°æ®</li>
<li>é€šè¿‡æ•°æ®é¢„å–æ¥é™ä½å»¶è¿Ÿ</li>
<li>ä½¿ç”¨æœ¬åœ°å­˜å‚¨æ¥æ™ºèƒ½çš„å‡å°‘ç½‘ç»œè¯·æ±‚</li>
<li>æ”¯æŒè¿œç¨‹æ•°æ®å›å¡«åˆ°æœ¬åœ°</li>
<li>é€šè¿‡é™é€Ÿå’Œç¼“å­˜ç½‘ç»œè¯·æ±‚æ¥é™ä½è¿œç«¯è´Ÿè½½</li>
</ul>

<p>ä¸»è¦æä¾›äº†ä»¥ä¸‹å‡ ç»„ APIï¼š</p>

<ul>
<li>new Bloodhound(options)</li>
<li>Bloodhound.noConflict()</li>
<li>Bloodhound#initialize(reinitialize)</li>
<li>Bloodhound#add(data)</li>
<li>Bloodhound#get(ids)</li>
<li>Bloodhound#search(query, sync, async)</li>
<li>Bloodhound#clear()</li>
</ul>

<h3 id="toc_13">new Bloodhound(options)</h3>

<p>Bloodhound çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ„é€ å‡ºä¸€ä¸ª Bloodhound çš„å®ä¾‹æ¥ä½¿ç”¨ã€‚</p>

<p>ç¤ºä¾‹å¦‚ä¸‹:</p>

<pre><code>var engine = new Bloodhound({
  local: [&#39;dog&#39;, &#39;pig&#39;, &#39;moose&#39;],
  queryTokenizer: Bloodhound.tokenizers.whitespace,
  datumTokenizer: Bloodhound.tokenizers.whitespace
});
</code></pre>

<p>å¯ä»¥çœ‹åˆ°åœ¨ Bloodhound åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ”¯æŒä¼ å…¥ä¸€ä¸ªå‚æ•°å¯¹è±¡ï¼Œæ”¯æŒçš„é€‰é¡¹åŠè¯´æ˜å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>datumTokenizer</td>
<td></td>
<td>å¿…å¡«é¡¹ï¼Œæ•°æ®åˆ†è¯å™¨ï¼Œè®¾ç½®ä¸ºåŒ…å«ä¸€ä¸ªå‚æ•°çš„å‡½æ•° <code>(datum)</code>ï¼Œç”¨äºå°†è¯¥ä¼ å…¥å‚æ•°çš„æ•°æ®è½¬æ¢æˆæ•°ç»„åˆ—è¡¨</td>
</tr>
<tr>
<td>queryTokenizer</td>
<td></td>
<td>å¿…å¡«é¡¹ï¼ŒæŸ¥è¯¢åˆ†è¯å™¨ï¼Œè®¾ç½®ä¸ºä¸€ä¸ªåŒ…å«å‚æ•°çš„å‡½æ•° <code>(query)</code>ï¼Œç”¨äºå°†è¯¥ä¼ å…¥å‚æ•°çš„æ•°æ®è½¬æ¢æˆæ•°ç»„åˆ—è¡¨</td>
</tr>
<tr>
<td>initialize</td>
<td>true</td>
<td>å½“è®¾ç½®ä¸º false çš„æ—¶å€™ï¼ŒBloodhound éœ€è¦æ˜¾å¼è®¾ç½®åˆå§‹åŒ–çŠ¶æ€</td>
</tr>
<tr>
<td>identify</td>
<td><code>JSON.stringify</code></td>
<td>å¯è®¾ç½®ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„æ•°æ®å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªèƒ½å¤Ÿæ ‡è¯†è¯¥å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ï¼Œé»˜è®¤æ˜¯ <code>JSON.stringify</code> å‡½æ•°ã€‚å¼ºçƒˆå»ºè®®è‡ªå®šä¹‰æ­¤å‡½æ•°ã€‚</td>
</tr>
<tr>
<td>sufficient</td>
<td>5</td>
<td>è¡¨ç¤ºè¶³å¤Ÿçš„æ•°æ®ç»“æœï¼Œå½“ä»å†…éƒ¨ç´¢å¼•æ‹¿åˆ°çš„æ•°æ®é›†ä¸è¶³è¯¥æ•°å€¼æ—¶ï¼Œä¼šé€šè¿‡è°ƒç”¨ <code>#search</code> å‡½æ•°æ¥å°è¯•ä» <code>remote</code> æ•°æ®æºå›å¡«æ•°æ®ï¼Œ</td>
</tr>
<tr>
<td>sorter</td>
<td></td>
<td>è®¾ç½®ä¸€ä¸ªæ’åºå‡½æ•°æ¥å¯¹ç»“æœè¿›è¡Œæ’åºã€‚</td>
</tr>
<tr>
<td>local</td>
<td></td>
<td>å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªè¿”å›æ•°ç»„çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨ <code>#initialize</code> å‡½æ•°çš„æ—¶å€™æ·»åŠ åˆ°æœ¬åœ°ç´¢å¼•ä¸­ã€‚</td>
</tr>
<tr>
<td>prefetch</td>
<td></td>
<td>å¯ä»¥è®¾ç½®ä¸€ä¸ªåŒ…å«æ•°ç»„çš„ URL æˆ– JSON æ–‡ä»¶åœ°å€ï¼Œæ”¯æŒè‹¥å¹²é…ç½®å‚æ•°ã€‚</td>
</tr>
<tr>
<td>remote</td>
<td></td>
<td>å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ª URL åœ°å€ç”¨æ¥å½“æœ¬åœ°ç´¢å¼•æ•°æ®ä¸å¤Ÿæ—¶ä»è¿œç¨‹è·å–æ›´å¤šæ•°æ®ã€‚æ”¯æŒè‹¥å¹²é…ç½®å‚æ•°ã€‚</td>
</tr>
</tbody>
</table>

<h4 id="toc_14">Prefech å‚æ•°ç”¨äºåˆå§‹åŒ–çš„æ—¶å€™è·å–æ•°æ®</h4>

<p>å¦‚æœæµè§ˆå™¨æ”¯æŒæœ¬åœ°å­˜å‚¨ï¼Œå¦‚ Chromeï¼Œåˆ™æ•°æ®ä¼šè¢«ç¼“å­˜åœ¨æœ¬åœ°ä»¥é¿å…åç»­é¡µé¢é¢å¤–çš„ç½‘ç»œå¼€é”€ï¼Œç”±äºä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬çš„æœ¬åœ°å­˜å‚¨ç©ºé—´å—é™äºæµè§ˆå™¨ï¼Œæˆ‘ä»¬åº”åŠ é€Ÿè¿™ä¸ªåªæ˜¯ä¸€ä¸ªæœ€å‰ç«¯çš„ä¸€çº§ç¼“å­˜ï¼Œä¹Ÿä¸åº”åŒ…å«å¤ªå¤šçš„æ•°æ®ï¼Œä¸è¿‡å¯¹äºæˆ‘ä»¬ç¼“å­˜ä¸€äº›ç”¨æˆ·å¸¸è§çš„æ•°æ®åº”è¯¥è¶³å¤Ÿäº†ï¼Œæ¯”å¦‚ç”¨æˆ·æœ€è¿‘çš„æŸ¥è¯¢å†å²ï¼Œç”¨æˆ·ç»å¸¸è®¿é—®çš„æ•°æ®ç­‰ã€‚</p>

<p>Prefetch å‚æ•°æ”¯æŒçš„é…ç½®é€‰é¡¹ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>url</td>
<td></td>
<td>å¿…å¡«é¡¹ï¼Œç”¨äºåŠ è½½æ•°æ®çš„ URL åœ°å€ã€‚</td>
</tr>
<tr>
<td>cache</td>
<td>true</td>
<td>è®¾ç½®æˆ false åˆ™ä¸ä¼šèµ°æœ¬åœ°ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td>ttl</td>
<td>86400000ï¼ˆ1å¤©ï¼‰</td>
<td>ç¼“å­˜æ•°æ®çš„è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤1å¤©ï¼Œå•ä½æ¯«ç§’ã€‚</td>
</tr>
<tr>
<td>cacheKey</td>
<td>url</td>
<td>ç”¨äºä¿å­˜æœ¬åœ°ç¼“å­˜çš„ keyï¼Œé»˜è®¤å°±æ˜¯ URLã€‚</td>
</tr>
<tr>
<td>thumbprint</td>
<td></td>
<td>æ•°æ®æŒ‡çº¹ï¼Œç”¨äºåˆ¤æ–­æœ¬åœ°æ•°æ®æ˜¯å¦å’Œè¿œç¨‹æ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œä¼šé‡æ–°è·å–è¿œç¨‹æ•°æ®ã€‚</td>
</tr>
<tr>
<td>prepare</td>
<td>identify</td>
<td>åœ¨æ­£å¼å‘é€è¿œç¨‹åŠ è½½è¯·æ±‚ä¹‹å‰ï¼Œç”¨äºå¤„ç†è¯·æ±‚å‚æ•°çš„å‡½æ•°ã€‚åŒ…å«ç­¾å <code>prepare(settings)</code>, è¿”å›çš„ä¹Ÿæ˜¯ <code>settings</code>ã€‚é»˜è®¤æ˜¯ identify å‚æ•°çš„å‡½æ•°å®šä¹‰ã€‚</td>
</tr>
<tr>
<td>transform</td>
<td>identify</td>
<td>ç”¨äºè½¬æ¢è¯·æ±‚è¿”å›æ•°æ®çš„å‡½æ•°ï¼Œè¦æ±‚åŒ…å«ç­¾å <code>transform(response)</code>ã€‚é»˜è®¤æ˜¯ identify å‚æ•°çš„å‡½æ•°å®šä¹‰ã€‚</td>
</tr>
</tbody>
</table>

<h4 id="toc_15">Remote å‚æ•°ç”¨äºä»è¿œç«¯è·å–é¢å¤–çš„æ•°æ®</h4>

<p>ä¸ºäº†é¿å…å¯¹è¿œç«¯æœåŠ¡å™¨äº§ç”Ÿè¿‡åº¦çš„è¯·æ±‚ï¼Œremote çš„è¯·æ±‚æ˜¯é™é€Ÿè¿‡çš„ã€‚</p>

<p>Remote å‚æ•°æ”¯æŒçš„é…ç½®é€‰é¡¹ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>url</td>
<td></td>
<td>å¿…å¡«é¡¹ï¼Œè¯·æ±‚çš„ URL åœ°å€ã€‚</td>
</tr>
<tr>
<td>prepare</td>
<td>identify</td>
<td>åŒ prefetchï¼Œç”¨äºè¯·æ±‚å‰çš„å‚æ•°å¹²é¢„ã€‚å‡½æ•°ç­¾åä¸º <code>prepare(query, settings)</code>ï¼Œç¬¬ä¸€ä¸ª query å‚æ•°å€¼ä¸º <code>#search</code> æŸ¥è¯¢ï¼Œç¬¬äºŒä¸ª settings ä¸º Bloodhound æ‰€å†…éƒ¨åˆ›å»ºã€‚é»˜è®¤æ˜¯ identify å‚æ•°çš„å‡½æ•°å®šä¹‰ã€‚</td>
</tr>
<tr>
<td>wildcard</td>
<td></td>
<td>è®¾ç½®ä¸€ä¸ªé€šé…ç¬¦è¡¨ç¤ºï¼Œç”¨äº prepare æ–¹æ³•çš„ä½¿ç”¨</td>
</tr>
<tr>
<td>rateLimitBy</td>
<td>debounce</td>
<td>ç”¨äºç½‘ç»œé™é€Ÿçš„æ–¹æ³•ï¼Œæ”¯æŒ <code>debounce</code> å’Œ <code>throttle</code></td>
</tr>
<tr>
<td>rateLimitWait</td>
<td>300</td>
<td>ç”¨äºå‚æ•° <code>rateLimitBy</code> ä½¿ç”¨çš„æ—¶é—´é—´éš”ï¼Œå•ä½æ¯«ç§’ã€‚</td>
</tr>
<tr>
<td>transform</td>
<td>identify</td>
<td>ç”¨äºè½¬æ¢è¯·æ±‚è¿”å›æ•°æ®çš„å‡½æ•°ï¼Œè¦æ±‚åŒ…å«ç­¾å <code>transform(response)</code>ã€‚é»˜è®¤æ˜¯ identify å‚æ•°çš„å‡½æ•°å®šä¹‰ã€‚</td>
</tr>
</tbody>
</table>

<pre><code> var result = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace(&#39;value&#39;),
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      remote: {
        url: &#39;/search/suggest?q=%QUERY&#39;,
        wildcard: &#39;%QUERY&#39;
      }
    });
</code></pre>

<h3 id="toc_16">Bloodhound.noConflict()</h3>

<p>è¿”å›æ–°çš„å®ä¾‹ï¼Œç”¨äºé¿å…å‘½åå†²çªã€‚</p>

<pre><code>var Dachshund = Bloodhound.noConflict();
</code></pre>

<h3 id="toc_17">Bloodhound#initialize(reinitialize)</h3>

<p>ç”¨äºæ‰‹åŠ¨åˆå§‹åŒ–å¯¹è±¡ã€‚å‡†å¤‡æ•°æ®ï¼Œæ·»åŠ ç´¢å¼•ä»¥åŠå„é¡¹åˆå§‹åŒ–æ“ä½œã€‚åœ¨æ²¡æœ‰åˆå§‹åŒ–ä¹‹å‰ï¼Œ<code>#get</code> å’Œ <code>#search</code> æ˜¯æ²¡æœ‰åŠæ³•æ“ä½œçš„ã€‚é™¤é <code>initialize</code> è¢«è®¾ç½®æˆ <code>false</code>ï¼Œå¦åˆ™åœ¨æ„é€ å‡½æ•°é‡Œé¢æ˜¯ä¼šè‡ªåŠ¨è°ƒç”¨çš„ã€‚</p>

<h3 id="toc_18">Bloodhound#add(data)</h3>

<p>ç”¨äºæ¥æ”¶ä¸€ä¸ªæ•°ç»„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åæ·»åŠ åˆ°æœ¬åœ°çš„å†…éƒ¨ç´¢å¼•ä¸­ã€‚</p>

<pre><code>engine.add([{ val: &#39;one&#39; }, { val: &#39;two&#39; }]);
</code></pre>

<h3 id="toc_19">Bloodhound#get(ids)</h3>

<p>é€šè¿‡ ID ä»æœ¬åœ°ç´¢å¼•è¿”å›æ•°æ®ã€‚</p>

<pre><code>var engine = new Bloodhound({
    local: [{ id: 1, name: &#39;dog&#39; }, { id: 2, name: &#39;pig&#39; }],
    identify: function(obj) { return obj.id; },
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    datumTokenizer: Bloodhound.tokenizers.whitespace
  });

  engine.get([1, 3]); // [{ id: 1, name: &#39;dog&#39; }, null]
</code></pre>

<h3 id="toc_20">Bloodhound#search(query, sync, async)</h3>

<p>è¿”å›åŒ…å« <code>query</code> æŸ¥è¯¢çš„æ•°æ®ï¼Œæœ¬åœ°ç´¢å¼•æ‰¾åˆ°çš„æ•°æ®ä¼šè¢«è¿”å›åˆ° <code>sync</code> ç»“æœä¸­ï¼Œå¦‚æœæœ¬åœ°è¿”å›çš„æ•°æ®ä¸å¤Ÿæ•°ï¼Œä¼šæ„å»º <code>remote</code> è¯·æ±‚ï¼Œè¯¥è¯·æ±‚çš„ç»“æœå“åº”ä¼šé€šè¿‡ <code>async</code> è¿”å›ã€‚</p>

<pre><code>bloodhound.get(myQuery, sync, async);

function sync(datums) {
  console.log(&#39;datums from `local`, `prefetch`, and `#add`&#39;);
  console.log(datums);
}

function async(datums) {
  console.log(&#39;datums from `remote`&#39;);
  console.log(datums);
}
</code></pre>

<h3 id="toc_21">Bloodhound#clear()</h3>

<p>æ¸…ç†æœ¬åœ°å†…éƒ¨ç´¢å¼•ã€‚</p>

<h2 id="toc_22">Typeahead åŠŸèƒ½é›†æˆ</h2>

<p>ä¸Šé¢ä»‹ç»äº† Typeahead çš„åŸºæœ¬åŠŸèƒ½ï¼ŒçŸ¥é“äº† Typeahead æ”¯æŒä¸¤ç§æ–¹å¼æ¥ä»è¿œç¨‹è·å–æ•°æ®ï¼šPrefetch å’Œ Remoteã€‚</p>

<p>æˆ‘ä»¬å¯ä»¥å°†å°éƒ¨åˆ†é™æ€æ•°æ®æ•´ç†æˆ JSON æ ¼å¼ï¼Œç„¶åé€šè¿‡ API æš´éœ²å‡ºæ¥ï¼Œå†é€šè¿‡ Prefetch åŠ è£…åˆ°æœ¬åœ°ã€‚å¯¹äºå¸¸è§çš„æŸ¥è¯¢éœ€æ±‚ï¼Œæ¯”å¦‚çƒ­é—¨æœç´¢ã€æ¨èæœç´¢è¯ç­‰ï¼Œå¯ä»¥å¿«é€Ÿå¾—åˆ°ç»“æœï¼Œå¤§å¤§æå‡ç”¨æˆ·ä½“éªŒã€‚</p>

<p>è€Œå¯¹äºå…¶ä»–çš„æŸ¥è¯¢è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªè¯·æ±‚å‘é€ç»™åç«¯çš„ PHP æ¥å£ï¼ŒPHP æ¥å£å†å»è¯·æ±‚ Elasticsearch è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åå°†è¿”å›ç»“æœäº¤ç»™ Typeahead å°è£…æ˜¾ç¤ºåœ¨æœç´¢æç¤ºç»“æœåˆ—è¡¨ã€‚</p>

<h3 id="toc_23">åŠ è½½æœ¬åœ°æ•°æ®</h3>

<p>æˆ‘ä»¬è¿™èŠ‚ä¸»è¦ç”¨æ¥å®ç°çƒ­é—¨æœç´¢ã€æ¨èæœç´¢è¯çš„æœç´¢ã€‚</p>

<p>æˆ‘ä»¬åŸºäºå‰é¢çš„æ¼”ç¤ºé¡µé¢è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªåŒ…å«æœç´¢çƒ­è¯ JSON å¯¹è±¡æ•°ç»„çš„æ–‡ä»¶ <code>top_search.json</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>

<pre><code>[{
  &quot;keyword&quot;:&quot;Elastic å®˜ç½‘&quot;,
  &quot;url&quot;:&quot;https://elastic.co&quot;
},{
  &quot;keyword&quot;:&quot;Elastic ä¸­æ–‡ç¤¾åŒº&quot;,
  &quot;url&quot;:&quot;https://elastic.co&quot;
},{
  &quot;keyword&quot;:&quot;Elastic æºç  @Github&quot;,
  &quot;url&quot;:&quot;https://github.com/elastic&quot;
},{
  &quot;keyword&quot;:&quot;Elastic Stack ä¸‹è½½&quot;,
  &quot;url&quot;:&quot;https://www.elastic.co/downloads&quot;
},{
  &quot;keyword&quot;:&quot;Elasticsearch ä¸‹è½½&quot;,
  &quot;url&quot;:&quot;https://www.elastic.co/downloads/elasticsearch&quot;
},{
  &quot;keyword&quot;:&quot;Elastic è‹±æ–‡ç¤¾åŒº&quot;,
  &quot;url&quot;:&quot;https://discuss.elastic.co&quot;
}]
</code></pre>

<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š<br/>
<img src="media/15308021492726/15313673860920.jpg" alt=""/></p>

<p>ç„¶åæˆ‘ä»¬ç¼–è¾‘ <code>index.html</code>ï¼Œä¿®æ”¹å…¶ä¸­çš„è„šæœ¬éƒ¨åˆ†ï¼š</p>

<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;

//å®šä¹‰ä¸€ä¸ª Prefech çš„ Bloodhound å®ä¾‹ï¼Œæ•°æ®æ¥æºä¸ºä¸€ä¸ª json æ–‡ä»¶
 var topSearch = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace(&#39;keyword&#39;),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        prefetch: &#39;top_search.json&#39;
});


//ç»‘å®š #demo å¯¹è±¡ï¼Œèµ‹äºˆ typeahead çš„æœç´¢æç¤ºè¡Œä¸º
$(&#39;#demo .typeahead&#39;).typeahead({
  hint: true,
  highlight: true,
  minLength: 1,
  autoselect: false
},
{
  name: &#39;topSearch&#39;,
  displayKey: &#39;keyword&#39;,
  source: topSearch,
  &quot;templates&quot;:{
    &quot;notFound&quot;:function(context){ return &quot;&lt;span class=tt-empty&gt;Nothing Found for query: &quot;+context.query+&quot;!&lt;/span&gt;&quot; },
    &quot;header&quot;:&quot;&lt;span style=font-size:12px;&gt;My suggestion:&lt;/span&gt;&quot;,
    &quot;footer&quot;:&quot;&lt;span style=font-size:10px;&gt;Copyright 2018 &amp;copy;&lt;/span&gt;&quot;,
    &quot;suggestion&quot;:function(context){ return &quot;&lt;div&gt;&quot;+context+&quot;!&lt;/div&gt;&quot; },

  }
});

&lt;/script&gt;
</code></pre>

<p>æˆ‘ä»¬åœ¨è¯¥ç›®å½•è¿è¡Œä¸€ä¸ªå‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨:</p>

<pre><code>python -m SimpleHTTPServer 9080
</code></pre>

<p>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:9080</code>ï¼Œç„¶åå°±ä¼šå‡ºç°æˆ‘ä»¬ç†Ÿæ‚‰çš„è¾“å…¥æ¡†ï¼Œæˆ‘ä»¬è¾“å…¥ <code>el</code>ï¼Œæ•ˆæœå¦‚ä¸‹:<br/>
<img src="media/15308021492726/15313677782693.jpg" alt=""/><br/>
å¯ä»¥çœ‹åˆ°ï¼Œæœ‰5æ¡æœç´¢ç»“æœï¼Œä¸è¿‡æ€ä¹ˆæ˜¾ç¤ºéƒ½æ˜¯ <code>object</code> å•Šï¼Œæ©ï¼ŒåŸæ¥æ˜¯æ¨¡æ¿è¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œæœç´¢ç»“æœä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®è¦æ“ä½œçš„å…·ä½“å­—æ®µï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>

<pre><code>&quot;templates&quot;:{
    &quot;notFound&quot;:function(context){ return &quot;&lt;span class=tt-empty&gt;Nothing Found for query: &quot;+context.query+&quot;!&lt;/span&gt;&quot; },
    &quot;header&quot;:&quot;&lt;span style=font-size:12px;&gt;My suggestion:&lt;/span&gt;&quot;,
    &quot;footer&quot;:&quot;&lt;span style=font-size:10px;&gt;Copyright 2018 &amp;copy;&lt;/span&gt;&quot;,
    &quot;suggestion&quot;:function(context){ return &#39;&lt;div&gt;&#39;+context.keyword+&#39;!&lt;br/&gt;&lt;span style=font-size=2px&gt;&lt;a href=&quot;&quot;&#39;+context[&quot;url&quot;]+&#39;&quot; &gt;&#39;+context.url+&#39;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&#39; }
  }
</code></pre>

<p>æ›´æ–°åçš„æ•ˆæœå¦‚ä¸‹ï¼š<br/>
<img src="media/15308021492726/15313681942937.jpg" alt=""/></p>

<p>æ˜¯ä¸æ˜¯å¾ˆèµ?</p>

<p>æˆ‘ä»¬ä¸ä»…ä»è¿œç¨‹ä¸‹è½½äº†ç‰¹å®šçš„æ•°æ®é›†ï¼Œè€Œä¸”è¿˜è‡ªå®šä¹‰äº†å±•ç°æ ·å¼ï¼ŒåŠ ä¸Šäº†é“¾æ¥å¯ä»¥ç‚¹å‡»å‰å¾€æœç´¢ç»“æœå¯¹åº”çš„ URL åœ°å€ï¼Œä½ ç”šè‡³è¿˜å¯ä»¥åŠ ä¸Šæ ‡ç­¾ã€æ—¶é—´ã€ç›®å½•ã€å›¾ç‰‡ç­‰å±æ€§æ¥ä¸°å¯Œå±•ç°æ•ˆæœã€‚</p>

<h3 id="toc_24">è·å–è¿œç¨‹æ•°æ®</h3>

<p>æˆ‘ä»¬åŒæ ·åœ¨ç›®å½•æ–°å»ºä¸€ä¸ª <code>source.json</code> çš„æ•°æ®æ–‡ä»¶ï¼š</p>

<pre><code>[{
  &quot;keyword&quot;:&quot;Elastic å®˜ç½‘[From Source]&quot;,
  &quot;url&quot;:&quot;https://elastic.co&quot;
},{
  &quot;keyword&quot;:&quot;Elastic ä¸­æ–‡ç¤¾åŒº[From Source]&quot;,
  &quot;url&quot;:&quot;https://elastic.co&quot;
}
...
]
</code></pre>

<p>ç¼–è¾‘ index.html æ–‡ä»¶ï¼Œä¿®æ”¹è„šæœ¬ï¼Œæ–°å¢ä¸€ä¸ª remote é…ç½®:</p>

<pre><code> var topSearch = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace(&#39;keyword&#39;),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        prefetch: &#39;top_search.json&#39;,
        remote: &#39;remote.json&#39;
});
</code></pre>

<p>é‡æ–°æ‰“å¼€æµè§ˆå™¨æµ‹è¯•è¾“å…¥ï¼š<code>elastic s</code> æœç´¢ï¼š<br/>
<img src="media/15308021492726/15314001057702.jpg" alt=""/></p>

<p>å¯ä»¥çœ‹åˆ°è¾“å…¥ <code>elastic</code> çš„æ—¶å€™ï¼Œéƒ½æ˜¯èµ°çš„æœ¬åœ°ç¼“å­˜ï¼Œä¸­é—´è¾“å…¥å­—ç¬¦çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰äº§ç”Ÿé¢å¤–çš„ç½‘ç»œè¯·æ±‚ï¼Œåªæœ‰å½“è¾“å…¥åˆ° <code>s</code> çš„æ—¶å€™ï¼Œå€™é€‰ç»“æœä¸è¶³5ä¸ªï¼Œè¿™ä¸ªæ—¶å€™æ‰å¼€å§‹è®¿é—® remote çš„æ•°æ®æºï¼Œå®Œç¾ï¼</p>

<h3 id="toc_25">ä¸ç¤¾åŒºç½‘ç«™çš„é›†æˆ</h3>

<p>è¿™ä¸€èŠ‚å¼€å§‹è®¨è®ºæ€ä¹ˆæ”¹é€ ç¤¾åŒºç½‘ç«™äº†ï¼Œç¤¾åŒºç½‘ç«™æ˜¯ PHP å†™çš„ï¼Œç”¨çš„æ˜¯ MVC çš„æ¶æ„ã€‚</p>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°† typeahead.bundle.min.js æ–‡ä»¶æ‹·è´åˆ°ç½‘ç«™çš„é™æ€èµ„æºç›®å½•ï¼š/static/js/typeahead.bundle.min.js</p>

<p>ç„¶åæ‰“å¼€æ¨¡æ¿æ–‡ä»¶ï¼š/views/default/global/header.tpl.htmï¼Œæ‰¾åˆ°æœç´¢è¡¨å•æ‰€åœ¨çš„ä½ç½®ï¼Œåœ¨14è¡Œå’Œ29è¡Œä¹‹é—´ï¼Œå¦‚ä¸‹å›¾:<br/>
<img src="media/15308021492726/15314026458169.jpg" alt=""/></p>

<p>ä¸ºäº†å°½é‡å‡å°‘å¯¹åŸç³»ç»Ÿçš„ä¾µå…¥ï¼Œæˆ‘ä»¬ä¸ç›´æ¥ä¿®æ”¹åŸæœç´¢åŠŸèƒ½ï¼Œè€Œæ˜¯é‡‡å–åŠŸèƒ½æ›¿æ¢çš„æ–¹å¼æ¥è¿›è¡Œã€‚</p>

<p>æˆ‘ä»¬è¿™é‡ŒåŠ ä¸Šä¸€ä¸ªå¼€å…³æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä¸ºæ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘ä»¬è®¾ç½®ä¸º falseï¼Œå³æ¯æ¬¡éƒ½æ˜¯èµ°æ–°çš„æœç´¢ï¼Œåç»­å¯ä»¥æ”¹æˆåŠ¨æ€é…ç½®æ¥åˆ‡æ¢å¼€å…³ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="media/15308021492726/15314031543489.jpg" alt=""/></p>

<p>ç„¶åæˆ‘ä»¬åœ¨ //TODO çš„ä½ç½®å¼•å…¥æˆ‘ä»¬æ–°çš„ js æ–‡ä»¶å’ŒåŠ ä¸Šä¹‹å‰çš„æµ‹è¯•ä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="media/15308021492726/15314030970486.jpg" alt=""/></p>

<p>æŠŠä¸¤ä¸ª json æ–‡ä»¶æ‹·è´åˆ°ç½‘ç«™çš„æ ¹ç›®å½•ï¼Œç„¶åå°±å¯ä»¥æ‰“å¼€ç½‘ç«™æµ‹è¯•ä¸€ä¸‹æœç´¢çš„é›†æˆæ•ˆæœäº†ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="media/15308021492726/15314033472906.jpg" alt=""/></p>

<p>ç®€ç›´å®Œç¾ï¼Œé¢ï¼Œæš‚æ—¶æŠŠæ ·å¼çš„é—®é¢˜å¿½ç•¥ä¸€ä¸‹ï¼ŒåæœŸå¯ä»¥å†ä¸€èµ·ç¾åŒ–ğŸ˜Šã€‚</p>

<h3 id="toc_26">ä¸ Elasticsearch çš„é›†æˆ</h3>

<p>æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æä¾›ä¸€ä¸ª API æ¥æ›¿æ¢æ‰å›ºå®šçš„ remote.json æ•°æ®æºï¼Œä½¿ç”¨æ¥è‡ª Elasticsearch çš„æ•°æ®ã€‚</p>

<p>æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶ï¼š/app/search/ajax.phpï¼Œæ–°å¢ä¸€ä¸ªå¸®åŠ©å‡½æ•° <code>post</code>ï¼Œç”¨äºå‘é€ RESTful è¯·æ±‚ã€‚</p>

<pre><code>public function post($url,$queryDSL){

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POST, 1);
        $data_string=$queryDSL;

        $data_string= str_replace(&#39;\\r\\n&#39;,&quot;&quot;,$data_string);
        $data_string= str_replace(&#39;\r\n&#39;,&quot;&quot;,$data_string);
        $data_string= str_replace(&#39;\\r&#39;,&quot;&quot;,$data_string);
        $data_string= str_replace(&#39;\r&#39;,&quot;&quot;,$data_string);
        $data_string= str_replace(&#39;\n&#39;,&quot;&quot;,$data_string);
        $data_string= str_replace(&#39;\\n&#39;,&quot;&quot;,$data_string);

//          $username = &quot;elastic&quot;;
//          $password = &quot;changeme&quot;;
//          if(isset($username)&amp;&amp;isset($password)){
//              curl_setopt($ch, CURLOPT_USERPWD, $username . &quot;:&quot; . $password);
//          }

        curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                &#39;Content-Type: application/json; charset=utf-8&#39;,
                &#39;Content-Length: &#39; . strlen($data_string))
        );
        ob_start();
        $json=curl_exec($ch);
        $return_content =$json;
        ob_end_clean();

        //å¦‚æœè¯·æ±‚æ‰§è¡ŒæˆåŠŸä¼šè¿”å›200çš„çŠ¶æ€ç ï¼Œåˆ™è¿”å›å“åº”ç»“æœ
        $return_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        if($return_code==200){
            return$return_content;
        }

        return null;
    }
</code></pre>

<p>ç„¶åå†æ–°å»ºä¸€ä¸ªåä¸º <code>suggest_action</code> çš„å‡½æ•°ç”¨æ¥å¤„ç†å°è£… Elasticsearch çš„æŸ¥è¯¢è¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>    public function suggest_action(){

        //è·å–è¯·æ±‚å‚æ•°ï¼Œå‚æ•°åä¸º q
        $keyword=$_GET[&#39;q&#39;];

        //å›ºå®šçš„æœç´¢åœ°å€ï¼Œæ¥è‡ªç´¢å¼• forum-mysql
        $url=&quot;http://localhost:9200/forum-mysql/_search&quot;;

        //å°è£… QueryDSL æŸ¥è¯¢ï¼Œè¿‡æ»¤è¿”å›å­—æ®µ
        $dsl=&#39;{
          &quot;query&quot;: {
            &quot;match&quot;: {
              &quot;title&quot;: &quot;&#39;.$keyword.&#39;&quot;
            }
          },&quot;_source&quot;: [&quot;title&quot;,&quot;id&quot;,&quot;uid&quot;,&quot;views&quot;]
        }&#39;;

        //æ‰§è¡Œ HTTP è¯·æ±‚ï¼Œå‘é€ç»™ ES
        $response=self::post($url,$dsl);

        if($response!=null){

            $result=array();
            $o=json_decode($response,true);
            if(isset($o[&quot;hits&quot;][&quot;hits&quot;])){
                foreach ($o[&quot;hits&quot;][&quot;hits&quot;] as $v){
                    //é‡æ–°å°è£…å­—æ®µåç§°ï¼Œç¬¦åˆæœç´¢æç¤ºçš„ç»“æœè§„èŒƒ
                    $x[&quot;keyword&quot;]=$v[&quot;_source&quot;][&quot;title&quot;];
                    //æ ¹æ®æ–‡ç« çš„ ID æ¥æ‹¼æ¥æ–‡ç« çš„ URL
                    $x[&quot;url&quot;]=&quot;/article/&quot;.$v[&quot;_source&quot;][&quot;id&quot;];
                    //æ”¾å…¥åˆ°ç»“æœæ•°ç»„
                    array_push($result,$x);
                }
            }

            //ç”Ÿæˆ JSON æ ¼å¼ï¼Œè¾“å‡º
            echo json_encode($result);
        }
    }
</code></pre>

<p>ç°åœ¨æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®è¯¥æ¥å£åœ°å€ï¼š<code>http://localhost:8080/search/ajax/suggest/?q=beats</code>ï¼Œåº”è¯¥å°±èƒ½çœ‹åˆ°æ¥è‡ª Elasticsearch çš„æ•°æ®äº†ï¼š</p>

<p><img src="media/15308021492726/15314097220517.jpg" alt=""/></p>

<p>å› ä¸ºæˆ‘ä»¬è¯·æ±‚çš„åœ°å€å·²ç»å˜åŒ–ï¼Œå¹¶ä¸”è¦æ ¹æ®æ¯æ¬¡è¾“å…¥çš„å…³é”®å­—è‡ªåŠ¨æ‹¼æ¥è¯·æ±‚ä¸²ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¿®æ”¹ Typeahead çš„è°ƒç”¨ä»£ç ï¼Œæ‰“å¼€ <code>/views/default/global/header.tpl.htm</code> ä¿®æ”¹å¦‚ä¸‹ï¼š</p>

<pre><code>var topSearch = new Bloodhound({
                    datumTokenizer: Bloodhound.tokenizers.obj.whitespace(&#39;keyword&#39;),
                    queryTokenizer: Bloodhound.tokenizers.whitespace,
                    prefetch: &#39;top_search.json&#39;,
                    remote:   {
                        url: &#39;/search/ajax/suggest/?q=%QUERY&#39;,
                        wildcard: &#39;%QUERY&#39;
                }
                });
</code></pre>

<p>ä¿å­˜æ›´æ–°ï¼Œå†æ¬¡æ‰“å¼€æµè§ˆå™¨ï¼Œæˆ‘ä»¬ç‚¹å‡»æœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®å­—ï¼Œå°±èƒ½å‡ºç°æ¥è‡ªçœŸå®æ•°æ®çš„æœç´¢æç¤ºäº†ï¼š</p>

<p><img src="media/15308021492726/15314108350459.jpg" alt=""/></p>

<p>å¤§åŠŸå‘Šæˆã€‚</p>

<h2 id="toc_27">å°çŸ¥è¯†</h2>

<h3 id="toc_28">ä»€ä¹ˆæ˜¯ AJAXï¼Ÿ</h3>

<p>AJAX = å¼‚æ­¥ JavaScript å’Œ XMLã€‚</p>

<p>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</p>

<p>é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAX å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p>

<p>è€Œä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨ AJAXï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…éœ€é‡è½½æ•´ä¸ªç½‘é¡µé¢ã€‚</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div style="width:50%;float:left;padding-left: 15px;">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="3.6_data_migration.html"  title="Previous Post: æ•°æ®è¿ç§»">&laquo; æ•°æ®è¿ç§»</a>
	    
	</div>
  </div>
  <div style="width:50%;float:right;padding-right: 15px;">
	<div class="text-right" style="padding:15px 0px;">
		
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://elastic-sou-suo-kai-fa-shi-zhan.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                            

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '3.7_autocomplete.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>

<!-- toc -->
<script src="asset/js/jquery.ztree.all-3.5.min.js?v=4?v=20151125" type="text/javascript"></script>
<script src="asset/js/ztree_toc.js?v=4?v=20151125" type="text/javascript"></script>
<SCRIPT type="text/javascript" >
  <!--
  $(document).ready(function(){
    $('#tree').ztree_toc({
      is_auto_number:true
    });
  });
  //-->
  </SCRIPT>
  <!-- toc -->

  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2018 <a target="_blank" href="http://medcl.com">Medcl</a>. æœªç»è®¸å¯,è°¢ç»è½¬è½½.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    
<!-- UserVoice JavaScript SDK (only needed once on a page) -->
<script>(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='http://widget.uservoice.com/c1PjjxGIoKy3HUGvYKodbA.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})()</script>

<!-- A tab to launch the Classic Widget -->
<script>
UserVoice = window.UserVoice || [];
UserVoice.push(['showTab', 'classic_widget', {
  mode: 'feedback',
  primary_color: '#fa8c28',
  link_color: '#0a8cc6',
  forum_id: 53824,
  support_tab_name: 'è”ç³»æˆ‘',
  feedback_tab_name: 'ç»™äºˆåé¦ˆ',
  tab_label: 'æ„è§åé¦ˆ',
  tab_color: '#2369d9',
  tab_position: 'middle-right',
  tab_inverted: false
}]);
</script>


    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script id="dsq-count-scr" src="//elastic-sou-suo-kai-fa-shi-zhan.disqus.com/count.js" async></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120597990-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-120597990-1');
    </script>
  </body>
</html>
